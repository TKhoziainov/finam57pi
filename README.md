# Finam x HSE Trade AI Hack - Baseline

–ë–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω –¥–ª—è —Ö–∞–∫–∞—Ç–æ–Ω–∞ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ —Ç—Ä–µ–π–¥–µ—Ä–∞ –Ω–∞ –±–∞–∑–µ Finam TradeAPI.

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–±–æ—á–∏–π –±–µ–π–∑–ª–∞–π–Ω –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ `submission.csv` - —Ñ–∞–π–ª–∞ —Å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è–º–∏ API –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–æ–ø—Ä–æ—Å–æ–≤ –Ω–∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–º —è–∑—ã–∫–µ.

**–ó–∞–¥–∞—á–∞**: –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ –≤ HTTP –∑–∞–ø—Ä–æ—Å –∫ Finam TradeAPI
- –í—Ö–æ–¥: –≤–æ–ø—Ä–æ—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ß—Ç–æ –ø–æ –ì–∞–∑–ø—Ä–æ–º—É —Å–µ–≥–æ–¥–Ω—è?")
- –í—ã—Ö–æ–¥: HTTP –º–µ—Ç–æ–¥ (GET/POST/DELETE) + API –ø—É—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/v1/instruments/GAZP@MISX/quotes/latest`)

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Poetry (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
curl -sSL https://install.python-poetry.org | python3 -

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
poetry install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
# OpenRouter API –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ LLM
OPENROUTER_API_KEY=your_api_key_here
OPENROUTER_MODEL=openai/gpt-4o-mini  # –∏–ª–∏ –¥—Ä—É–≥–∞—è –º–æ–¥–µ–ª—å
```

### 3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è submission.csv

```bash
# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å submission.csv –Ω–∞ –æ—Å–Ω–æ–≤–µ test.csv
poetry run generate-submission

# –ò–ª–∏ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
poetry run generate-submission \
    --test-file data/processed/test.csv \
    --train-file data/processed/train.csv \
    --output-file data/processed/submission.csv \
    --num-examples 15
```

### 4. –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å submission.csv
poetry run validate-submission
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ processed/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ train.csv          # –û–±—É—á–∞—é—â–∏–µ –ø—Ä–∏–º–µ—Ä—ã (100 –∑–∞–ø—Ä–æ—Å–æ–≤)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ test.csv           # –¢–µ—Å—Ç–æ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã (300 –∑–∞–ø—Ä–æ—Å–æ–≤)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sample_submission.csv  # –ü—Ä–∏–º–µ—Ä submission
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ submission.csv     # –í–∞—à —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π submission
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îú‚îÄ‚îÄ task.md                # –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
‚îÇ   ‚îú‚îÄ‚îÄ evaluation.md          # –ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è –æ—Ü–µ–Ω–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ data.md                # –û–ø–∏—Å–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ generate_submission.py # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è submission.csv
‚îÇ   ‚îî‚îÄ‚îÄ validate_submission.py # –í–∞–ª–∏–¥–∞—Ü–∏—è submission.csv
‚îú‚îÄ‚îÄ src/app/
‚îÇ   ‚îú‚îÄ‚îÄ config.py              # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (API –∫–ª—é—á–∏)
‚îÇ   ‚îî‚îÄ‚îÄ llm.py                 # –û–±–µ—Ä—Ç–∫–∞ –¥–ª—è –≤—ã–∑–æ–≤–∞ LLM
‚îî‚îÄ‚îÄ tests/
    ‚îî‚îÄ‚îÄ test_submission_validator.py
```

## üéØ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **Few-shot Learning**: –°–∫—Ä–∏–ø—Ç –±–µ—Ä–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏–∑ `train.csv` –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏—Ö –∫–∞–∫ —à–∞–±–ª–æ–Ω—ã –¥–ª—è LLM
2. **LLM –≥–µ–Ω–µ—Ä–∞—Ü–∏—è**: –î–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ –∏–∑ `test.csv` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å –∫ LLM —Å –ø—Ä–æ–º–ø—Ç–æ–º –∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏
3. **–ü–∞—Ä—Å–∏–Ω–≥ –æ—Ç–≤–µ—Ç–∞**: –û—Ç–≤–µ—Ç LLM –ø–∞—Ä—Å–∏—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç `(HTTP_METHOD, API_PATH)`
4. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ**: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `submission.csv`

## üîß –£–ª—É—á—à–µ–Ω–∏–µ –±–µ–π–∑–ª–∞–π–Ω–∞

–≠—Ç–æ—Ç –±–µ–π–∑–ª–∞–π–Ω —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ —Å–¥–µ–ª–∞–Ω –ø—Ä–æ—Å—Ç—ã–º –¥–ª—è –ª–µ–≥–∫–æ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è. –í–æ–∑–º–æ–∂–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

### –î–ª—è —É–ª—É—á—à–µ–Ω–∏—è accuracy –Ω–∞ –ª–∏–¥–µ—Ä–±–æ—Ä–¥–µ:
- üß† –£–ª—É—á—à–∏—Ç–µ –ø—Ä–æ–º–ø—Ç (–¥–æ–±–∞–≤—å—Ç–µ –±–æ–ª—å—à–µ –¥–µ—Ç–∞–ª–µ–π API, —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥)
- üìö –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º few-shot –ø—Ä–∏–º–µ—Ä–æ–≤
- üé≤ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ–ª–µ–µ —É–º–Ω—É—é –≤—ã–±–æ—Ä–∫—É –ø—Ä–∏–º–µ—Ä–æ–≤ (–ø–æ —Å—Ö–æ–∂–µ—Å—Ç–∏ –≤–æ–ø—Ä–æ—Å–æ–≤)
- ü§ñ –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–∏–µ LLM –º–æ–¥–µ–ª–∏ (GPT-4, Claude –∏ —Ç.–¥.)
- üîÑ –î–æ–±–∞–≤—å—Ç–µ retry –ª–æ–≥–∏–∫—É —Å —É–ª—É—á—à–µ–Ω–Ω—ã–º –ø—Ä–æ–º–ø—Ç–æ–º –ø—Ä–∏ –Ω–µ—É–¥–∞—á–µ
- ‚úÖ –î–æ–±–∞–≤—å—Ç–µ post-processing –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–∏–ø–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫

### –î–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –∫–µ–π—Å–æ–≤ (30% –æ—Ü–µ–Ω–∫–∏):
- üí¨ –î–æ–±–∞–≤—å—Ç–µ —á–∞—Ç-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (Streamlit, Gradio, FastAPI + —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥)
- üìä –†–µ–∞–ª–∏–∑—É–π—Ç–µ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö (–≥—Ä–∞—Ñ–∏–∫–∏ —Ü–µ–Ω, –ø–æ—Ä—Ç—Ñ–µ–ª—å)
- üîå –ü–æ–¥–∫–ª—é—á–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–π Finam TradeAPI SDK
- ü§ù –î–æ–±–∞–≤—å—Ç–µ multi-turn –¥–∏–∞–ª–æ–≥ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- üé® –°–æ–∑–¥–∞–π—Ç–µ –∫—Ä–∞—Å–∏–≤—ã–π UI/UX

## üìä –í–∞–ª–∏–¥–∞—Ü–∏—è

–ü–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ submission:

```bash
poetry run validate-submission
```

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç:
- ‚úÖ –ù–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö uid –∏–∑ test.csv
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å HTTP –º–µ—Ç–æ–¥–æ–≤
- ‚úÖ –í–∞–ª–∏–¥–Ω–æ—Å—Ç—å API –ø—É—Ç–µ–π
- ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—É—Å—Ç—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- ‚úÖ –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å uid

## üîç Code Quality

```bash
# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
poetry run ruff format .

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–Ω—Ç–µ—Ä–æ–º
poetry run ruff check .

# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ—Ñ–∏–∫—Å–∏–º—ã—Ö –ø—Ä–æ–±–ª–µ–º
poetry run ruff check --fix .
```

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏](docs/task.md)
- [–ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è –æ—Ü–µ–Ω–∫–∏](docs/evaluation.md)
- [–û–ø–∏—Å–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö](docs/data.md)

## ü§ù –î–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤

–≠—Ç–æ—Ç –±–µ–π–∑–ª–∞–π–Ω —Å–æ–∑–¥–∞–Ω –∫–∞–∫ —Å—Ç–∞—Ä—Ç–æ–≤–∞—è —Ç–æ—á–∫–∞ –¥–ª—è 40 –∫–æ–º–∞–Ω–¥ —Ö–∞–∫–∞—Ç–æ–Ω–∞. –û–Ω:
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–µ–Ω –∏ –ø–æ–Ω—è—Ç–µ–Ω
- ‚úÖ –õ–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è –≤ —Ä–∞–∑–Ω—ã—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö
- ‚úÖ –î–∞–µ—Ç –±–∞–∑–æ–≤—É—é accuracy –¥–ª—è —Å—Ç–∞—Ä—Ç–∞
- ‚úÖ –°–æ–¥–µ—Ä–∂–∏—Ç –≤—Å—é –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É (–≤–∞–ª–∏–¥–∞—Ü–∏—è, —Å–∫—Ä–∏–ø—Ç—ã)

–ö–æ–º–∞–Ω–¥—ã –º–æ–≥—É—Ç —Ä–∞–∑–≤–∏–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –≤ –ª—é–±–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏: —É–ª—É—á—à–∞—Ç—å –ø—Ä–æ–º–ø—Ç—ã, –¥–æ–±–∞–≤–ª—è—Ç—å UI, –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å —Ä–µ–∞–ª—å–Ω—ã–º API, —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ —Ç.–¥.
