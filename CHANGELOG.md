# Changelog - Рефакторинг в минимальный бейзлайн

## Что было удалено

### ❌ Удалены неправильные компоненты:
- `src/app/main.py` - FastAPI приложение (не нужно для baseline)
- `src/app/cli.py` - CLI для запуска FastAPI
- `src/app/tools/` - Полная директория с tool calling логикой
- `src/app/viz/` - Визуализация (преждевременно для baseline)
- `src/app/adapters/` - Заглушка Finam клиента
- `src/app/logging_setup.py` - Пустой файл

**Причина**: Старый код реализовывал LLM tool calling для вызова Python функций,
но задача хакатона требует генерировать HTTP запросы к API, а не вызывать функции.

## Что было создано

### ✅ Новая минималистичная архитектура:

#### 1. `scripts/generate_submission.py` - Основной скрипт генерации
**Функционал:**
- Загружает примеры из `train.csv` для few-shot learning
- Для каждого вопроса из `test.csv` генерирует API запрос через LLM
- Использует промпт с документацией API и примерами
- Парсит ответ LLM в формат `(HTTP_METHOD, API_PATH)`
- Сохраняет результаты в `submission.csv`

**Использование:**
```bash
poetry run generate-submission
poetry run generate-submission --num-examples 15
```

#### 2. `src/app/llm.py` - Упрощенная обертка для LLM
**Изменения:**
- Удален `call_llm_with_tools()` (не нужен)
- Добавлен простой `call_llm()` для обычных запросов к LLM

#### 3. Обновлены зависимости в `pyproject.toml`
**Удалено:**
- `fastapi` - не нужен для baseline
- `uvicorn` - не нужен
- `pandas` - не используется в baseline
- `plotly` - не используется в baseline

**Добавлено:**
- `click` - для CLI
- `tqdm` - progress bar при генерации
- `types-requests` - типы для mypy

#### 4. Обновлен `README.md`
- Полностью переписан с фокусом на задачу хакатона
- Добавлены четкие инструкции по использованию
- Описана архитектура бейзлайна
- Приведены примеры расширения

#### 5. Создан `.env.example`
Пример конфигурации с OpenRouter API

## Исправлены баги

- ❌ Дублирование `if __name__ == "__main__"` в cli.py
- ❌ Дублирование `return s` в config.py
- ❌ Упоминание несуществующего модуля `case_baseline` в README

## Что теперь работает

1. ✅ Корректная генерация submission.csv из test.csv
2. ✅ Few-shot learning с примерами из train.csv
3. ✅ Валидация submission через `validate-submission`
4. ✅ Чистая архитектура без лишних компонентов
5. ✅ Готовая база для расширения в разных направлениях

## Следующие шаги для команд

### Для улучшения accuracy (70% оценки):
1. Улучшить промпт (добавить больше деталей API)
2. Экспериментировать с few-shot примерами
3. Использовать semantic search для выбора похожих примеров
4. Попробовать разные LLM модели
5. Добавить post-processing для исправления ошибок
6. Использовать structured output (JSON mode)

### Для продвинутых кейсов (30% оценки):
1. Добавить чат-интерфейс (Streamlit/Gradio/React)
2. Реализовать визуализацию (графики, портфель)
3. Подключить реальный Finam TradeAPI SDK
4. Multi-turn диалог с контекстом
5. Аналитика портфеля, бэктестинг стратегий

## Структура проекта (финальная)

```
├── data/processed/
│   ├── train.csv              # 100 обучающих примеров
│   ├── test.csv               # 300 тестовых вопросов
│   └── submission.csv         # Генерируемый файл
├── scripts/
│   ├── generate_submission.py # Основной скрипт генерации
│   └── validate_submission.py # Валидация submission
├── src/app/
│   ├── config.py              # Настройки (API keys)
│   └── llm.py                 # LLM wrapper
├── tests/
│   └── test_submission_validator.py
├── docs/                      # Документация задачи
├── pyproject.toml             # Зависимости
└── README.md                  # Инструкции
```

## Философия бейзлайна

**Минимализм**: Только то, что необходимо для решения основной задачи
**Простота**: Понятный код, который легко расширять
**Гибкость**: Множество путей развития проекта
**Стабильность**: Рабочий код, который даст базовую accuracy

Этот бейзлайн - **стартовая точка**, а не финальное решение.
Каждая команда может развивать его в своем направлении.

